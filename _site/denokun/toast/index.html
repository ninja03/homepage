<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title></title>
    <link rel="stylesheet" href="/denokun/style.css">
  </head>
  <body>
    <div class="header" onclick="location.href = '.'">
      
    </div>
      <p>メッセージをconsole.logでの出力を改良</p>
<ul>
<li>ユーザ登録、ログイン完了</li>
<li>エラーメッセージ</li>
<li>画像アップロード完了</li>
</ul>
<p>右下に2秒間ポップアップするように変更</p>
<img src="/denokun/img/toast.jpg" width="480" />  
<p><code>static/index.html</code></p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;style&gt;
      [x-cloak] {
        display: none;
      }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body class=&quot;bg-blue-200&quot;&gt;
    &lt;div x-data=&quot;app&quot; x-cloak&gt;
      &lt;div x-text=&quot;msg&quot; x-show=&quot;msg != null&quot; class=&quot;absolute bottom-0 right-0 p-2 bg-blue-400 text-white&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;script type=&quot;module&quot;&gt;
      Alpine.data(&quot;app&quot;, () =&gt; ({
        msg: null,

        // ページ右下に通知文を表示(2秒間)
        toast(msg) {
          this.msg = msg
          setTimeout(() =&gt; { this.msg = null }, 2000)
        },

        async good(photo) {
          if (!this.logined) {
            this.toast(&quot;ログインが必要です&quot;)
            return
          }
        },

        upload() {
          up.onload = async url =&gt; {
            await this.fetchAPI(&quot;post&quot;, { url })
            this.toast(&quot;「&quot; + this.up + &quot;をアップしました&quot;)
          }
        },

        async regist() {
          const r = await this.fetchAPI(&quot;regist&quot;, {
            name: this.registName,
            pass: this.registPass
          })
          if (r.err) {
            this.toast(&quot;登録されています&quot;)
            return
          }
          this.toast(&quot;ユーザ登録しました&quot;)
        },

        async login() {
          const r = await this.fetchAPI(&quot;login&quot;, {
            name: this.loginName,
            pass: this.loginPass
          })
          if (r.err) {
            this.toast(&quot;ユーザ名かパスワードが違います&quot;)
            return
          }
          this.toast(&quot;ログインしました&quot;)
        },

        // ログアウトする
        async logout() {
          await this.fetchAPI(&quot;logout&quot;)
          this.toast(&quot;ログアウトしました&quot;)
        }
      }))
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

  </body>
</html>